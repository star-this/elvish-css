/**
 * Elvish - Design Tokens
 * 
 * Modular scale and design tokens for consistent spacing,
 * typography, and colors throughout the system.
 * 
 * Uses modern CSS features:
 * - light-dark() for automatic theme switching
 * - Relative color syntax (oklch) for derived colors
 * 
 * RATIO MODES:
 * - golden (φ = 1.618): Classical, dramatic, organic - best for CTAs & impact
 * - silver (√2 = 1.414): Subtle, modern, ISO paper ratios - best for dense content
 * - fifth (1.5): Musical, balanced middle-ground
 * 
 * To change: set --ratio-mode on :root or any container
 *   :root { --ratio-mode: silver; }
 *   .documentation { --ratio-mode: silver; }
 */

:root {
  /* ===== COLOR SCHEME ===== */
  color-scheme: light dark;
  
  /* ===== RATIO PRESETS ===== */
  --ratio-golden: 1.618;      /* φ - Golden Ratio */
  --ratio-silver: 1.414;      /* √2 - Silver/Lichtenberg Ratio */
  --ratio-fifth: 1.5;         /* Perfect Fifth (musical) */
  
  /* ===== ACTIVE RATIO ===== */
  /* Default: Perfect Fifth for balanced harmony */
  --ratio: var(--ratio-fifth);
  
  /* ===== MODULAR SCALE (Every Layout) ===== */
  /* 
   * STATIC scale based on mathematical ratios.
   * Values are fixed and do NOT respond to viewport width.
   * 
   * USE THIS WHEN:
   *   - You want to switch ratios dynamically (golden/silver/fifth)
   *   - You need consistent spacing regardless of viewport
   *   - Building print stylesheets or fixed-width layouts
   * 
   * USE UTOPIA'S --step-* and --space-* WHEN:
   *   - You want fluid responsive typography
   *   - You want spacing that scales with viewport
   *   - Building responsive web layouts (most cases)
   * 
   * Golden Ratio scale at 16px base:
   * s-2: 6px   | s-1: 10px  | s0: 16px (base)
   * s1: 26px   | s2: 42px   | s3: 68px
   * s4: 110px  | s5: 178px
   */
  --s-5: calc(var(--s-4) / var(--ratio));
  --s-4: calc(var(--s-3) / var(--ratio));
  --s-3: calc(var(--s-2) / var(--ratio));
  --s-2: calc(var(--s-1) / var(--ratio));
  --s-1: calc(var(--s0) / var(--ratio));
  --s0: 1rem;
  --s1: calc(var(--s0) * var(--ratio));
  --s2: calc(var(--s1) * var(--ratio));
  --s3: calc(var(--s2) * var(--ratio));
  --s4: calc(var(--s3) * var(--ratio));
  --s5: calc(var(--s4) * var(--ratio));
  
  /* ===== STATIC SIZES (rem-based) ===== */
  /* 
   * Fixed sizes for when you need exact pixel values.
   * These do NOT respond to viewport - use Utopia's --space-* for fluid.
   */
  --size-1: 0.25rem;    /* 4px */
  --size-2: 0.5rem;     /* 8px */
  --size-3: 0.75rem;    /* 12px */
  --size-4: 1rem;       /* 16px */
  --size-5: 1.25rem;    /* 20px */
  --size-6: 1.5rem;     /* 24px */
  --size-7: 1.75rem;    /* 28px */
  --size-8: 2rem;       /* 32px */
  --size-9: 2.5rem;     /* 40px */
  --size-10: 3rem;      /* 48px */
  --size-11: 4rem;      /* 64px */
  --size-12: 5rem;      /* 80px */
  --size-13: 6rem;      /* 96px */
  --size-14: 8rem;      /* 128px */
  --size-15: 10rem;     /* 160px */
  
  /* ===== FLUID SIZES - DEPRECATED ===== */
  /* 
   * ⚠️  DEPRECATED: Use Utopia's --space-* system instead (in fluid.css)
   * 
   * These naive clamp() values are kept for backwards compatibility only.
   * Utopia's system is mathematically precise and harmonious.
   * 
   * Migration guide:
   *   --size-fluid-1  →  --space-3xs or --space-2xs
   *   --size-fluid-2  →  --space-xs or --space-s
   *   --size-fluid-3  →  --space-s or --space-m
   *   --size-fluid-4  →  --space-m or --space-l
   *   --size-fluid-5  →  --space-l or --space-xl
   *   --size-fluid-6  →  --space-xl
   *   --size-fluid-7  →  --space-xl-2xl (space pair)
   *   --size-fluid-8  →  --space-2xl-3xl (space pair)
   */
  --size-fluid-1: clamp(0.5rem, 1vw, 1rem);
  --size-fluid-2: clamp(1rem, 2vw, 1.5rem);
  --size-fluid-3: clamp(1.5rem, 3vw, 2rem);
  --size-fluid-4: clamp(2rem, 4vw, 3rem);
  --size-fluid-5: clamp(3rem, 5vw, 4rem);
  --size-fluid-6: clamp(4rem, 6vw, 5rem);
  --size-fluid-7: clamp(5rem, 8vw, 7rem);
  --size-fluid-8: clamp(6rem, 10vw, 10rem);
  --size-fluid-9: clamp(8rem, 15vw, 15rem);
  --size-fluid-10: clamp(10rem, 20vw, 20rem);
  
  /* ===== CONTENT WIDTH SIZES ===== */
  /* 
   * For readable text blocks. Use ch (character width) for text content.
   * Based on readability research: 45-75 characters per line optimal.
   */
  --size-content-1: 20ch;     /* Narrow - headlines, captions */
  --size-content-2: 45ch;     /* Compact - sidebars, cards */
  --size-content-3: 60ch;     /* Optimal - body text */
  --size-content-4: 75ch;     /* Wide - documentation */
  --size-content-5: 90ch;     /* Extra wide - code blocks */
  
  /* ===== HEADER/HEADLINE SIZES ===== */
  /* For constraining headline widths to prevent overly long lines */
  --size-header-1: 15ch;      /* Short tagline */
  --size-header-2: 20ch;      /* Headline */
  --size-header-3: 25ch;      /* Subheadline */
  --size-header-4: 35ch;      /* Long headline */
  
  /* ===== MEASURE (Legacy - Text line length) ===== */
  /* Maximum line length for readable text - varies by ratio */
  --measure: 70ch;  /* Default for Fifth; Golden=60ch, Silver=80ch */
  
  /* ===== LAYOUT THRESHOLDS ===== */
  /* 
   * These are for LAYOUT decisions, not text readability.
   * Use rem (not ch) because layout is about physical space, not characters.
   */
  --layout-threshold-sm: 30rem;   /* ~480px - phone landscape */
  --layout-threshold-md: 45rem;   /* ~720px - tablet portrait */
  --layout-threshold-lg: 60rem;   /* ~960px - tablet landscape */
  --layout-threshold-xl: 75rem;   /* ~1200px - small desktop */
  
  /* ===== BRAND COLOR (Single source of truth) ===== */
  /* Teal: rgba(0, 233, 188, 1) converted to OKLCH */
  --brand: oklch(83% 0.17 168);
  
  /* ===== DERIVED COLORS (Relative Color Syntax) ===== */
  /* Lighten/darken by adjusting L (lightness) */
  --brand-lighter: oklch(from var(--brand) calc(l + 0.3) c h);
  --brand-light: oklch(from var(--brand) calc(l + 0.15) c h);
  --brand-dark: oklch(from var(--brand) calc(l - 0.1) c h);
  --brand-darker: oklch(from var(--brand) calc(l - 0.2) c h);
  
  /* Desaturate by reducing C (chroma) */
  --brand-muted: oklch(from var(--brand) l calc(c * 0.5) h);
  --brand-subtle: oklch(from var(--brand) l calc(c * 0.25) h);
  
  /* Transparency variants */
  --brand-ghost: oklch(from var(--brand) l c h / 0.1);
  --brand-overlay: oklch(from var(--brand) l c h / 0.85);
  
  /* Complementary/Analogous via hue shift */
  --brand-complement: oklch(from var(--brand) l c calc(h + 180));
  --brand-analogous-1: oklch(from var(--brand) l c calc(h + 30));
  --brand-analogous-2: oklch(from var(--brand) l c calc(h - 30));
  
  /* ===== SEMANTIC COLORS (light-dark auto-switching) ===== */
  --color-surface: light-dark(#ffffff, #1a1a2e);
  --color-surface-raised: light-dark(#f8f9fa, #252538);
  --color-surface-sunken: light-dark(#e9ecef, #12121c);
  
  --color-text: light-dark(#1a1a2e, #f0f0f5);
  --color-text-muted: light-dark(#6c757d, #9ca3af);
  --color-text-subtle: light-dark(#adb5bd, #6b7280);
  
  --color-border: light-dark(#dee2e6, #374151);
  --color-border-strong: light-dark(#adb5bd, #4b5563);
  
  /* Accent adapts to theme */
  --color-accent: light-dark(
    oklch(from var(--brand) calc(l - 0.05) c h),
    oklch(from var(--brand) calc(l + 0.1) c h)
  );
  --color-accent-hover: light-dark(
    oklch(from var(--brand) calc(l - 0.15) c h),
    oklch(from var(--brand) calc(l + 0.2) c h)
  );
  --color-accent-text: light-dark(#ffffff, #1a1a2e);
  
  /* Status colors */
  --color-success: light-dark(oklch(55% 0.17 145), oklch(65% 0.17 145));
  --color-warning: light-dark(oklch(70% 0.15 85), oklch(75% 0.15 85));
  --color-danger: light-dark(oklch(55% 0.2 25), oklch(65% 0.2 25));
  --color-info: light-dark(oklch(55% 0.15 230), oklch(65% 0.15 230));
  
  /* Legacy aliases for backward compatibility */
  --color-dark: var(--color-text);
  --color-light: var(--color-surface);
  --color-mid: var(--color-text-muted);
  
  /* ===== BORDERS (Legacy - moved to borders.css) ===== */
  --border-thin: 1px;
  --border-thick: 3px;
  
  /* ===== FONT STACKS ===== */
  /*
   * Five font variables for flexible typography:
   * - --font-serif   : Traditional, elegant text (body, quotes)
   * - --font-sans    : Clean, modern text (UI, body)
   * - --font-title   : Display/heading font (can be same as sans)
   * - --font-code    : Monospace for code
   * - --font-alt     : Escape hatch / accent font
   *
   * Override at any scope to change fonts locally:
   *   <section style="--font-serif: 'Playfair Display', serif;">
   */
  --font-serif: Georgia, Cambria, "Times New Roman", Times, serif;
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-title: var(--font-sans);
  --font-code: ui-monospace, 'Cascadia Code', 'Fira Code', 'JetBrains Mono', Consolas, monospace;
  --font-alt: var(--font-serif);
  
  /* Legacy aliases (backwards compatibility) */
  --font-plain: var(--font-sans);
  --font-mono: var(--font-code);
  --font-display: var(--font-title);
  
  /* ===== LINE HEIGHT ===== */
  --line-height: 1.5;
  --line-height-tight: 1.2;
  --line-height-loose: 1.8;
  
  /* ===== Z-INDEX LAYERS ===== */
  /*
   * Consistent stacking context system.
   * Use these instead of arbitrary z-index values.
   */
  --layer-1: 10;        /* Slightly above normal flow */
  --layer-2: 20;        /* Dropdowns, tooltips */
  --layer-3: 30;        /* Fixed headers, sticky elements */
  --layer-4: 40;        /* Modals, dialogs */
  --layer-5: 50;        /* Notifications, toasts */
  --layer-important: 2147483647;  /* Maximum safe integer - use sparingly! */
  
  /* Semantic layer aliases */
  --layer-dropdown: var(--layer-2);
  --layer-sticky: var(--layer-3);
  --layer-modal: var(--layer-4);
  --layer-toast: var(--layer-5);
  
  /* ===== UX MOTION DURATIONS ===== */
  /*
   * Research-based animation durations from Brainly UX Motion guidelines.
   * Aligned with human perception and common UI patterns.
   */
  
  /* Instant - imperceptible, for state changes */
  --duration-instant: 0ms;
  
  /* Quick - micro-interactions */
  --duration-quick-1: 80ms;   /* Checkbox, radio, hover feedback */
  --duration-quick-2: 120ms;  /* Toggle, tab switch, chip, color change, fade */
  
  /* Moderate - standard UI elements */
  --duration-moderate-1: 180ms;  /* Dropdown open, tooltip appear */
  --duration-moderate-2: 260ms;  /* Modal open, toast appear, dialog */
  
  /* Gentle - larger/complex animations */
  --duration-gentle-1: 320ms;    /* Bottom sheet, card expand */
  --duration-gentle-2: 420ms;    /* Advanced animations, page transitions */
  
  /* Slow - deliberate, attention-drawing */
  --duration-slow-1: 600ms;      /* Complex reveals */
  --duration-slow-2: 1000ms;     /* Emphasis animations */
  
  /* Legacy aliases */
  --duration-fast: var(--duration-quick-2);
  --duration-normal: var(--duration-moderate-1);
  --duration-slow: var(--duration-gentle-2);
  
  /* ===== EASING (Basic - see easings.css for full set) ===== */
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* Legacy transition shortcuts */
  --transition-fast: var(--duration-fast) var(--ease-out);
  --transition-medium: var(--duration-normal) var(--ease-out);
  --transition-slow: var(--duration-slow) var(--ease-out);
}
