/**
 * Elvish - Typography (i-têw)
 * 
 * "Têw" (Sindarin) = letters, characters, writing
 * Handles all text and font styling concerns.
 * 
 * Philosophy:
 * - Typography is about readability, hierarchy, and voice
 * - Separate from visual effects (i-thîr) and layout (i-hath, etc.)
 * - Attributes map to typography CSS properties
 * - Composable with other Elvish primitives
 * 
 * Usage:
 *   <i-tew family="serif" size="lg" weight="bold">Heading</i-tew>
 *   <i-tew leading="loose" tracking="wide">Spaced text</i-tew>
 *   <i-tew transform="uppercase" align="center">CENTERED</i-tew>
 * 
 * Browser Support:
 * - Chrome/Edge: ✅ Full support
 * - Safari: ✅ Full support
 * - Firefox: ✅ Full support
 * - text-wrap: balance/pretty requires Chrome 114+/117+ (graceful fallback)
 */

/* ==========================================================================
   BASE ELEMENT
   ========================================================================== */

i-tew {
  /* Inline by default (text element) */
  display: inline;
  
  /* Inherit by default, attributes override */
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  
  /* Modular scale from tokens */
  --tew-size-base: var(--s0, 1rem);
}

/* Block variant for paragraphs/headings */
i-tew[block],
i-tew[display="block"] {
  display: block;
}

/* Inline-block for sized inline elements */
i-tew[inline-block] {
  display: inline-block;
}

/* ==========================================================================
   FONT FAMILY
   
   Uses the five font variables from tokens.css:
   --font-serif, --font-sans, --font-title, --font-code, --font-alt
   
   Override at any scope to change fonts locally:
     <section style="--font-serif: 'Playfair Display', serif;">
   ========================================================================== */

i-tew[family="sans"],
i-tew[family="plain"] {
  font-family: var(--font-sans);
}

i-tew[family="serif"] {
  font-family: var(--font-serif);
}

i-tew[family="title"],
i-tew[family="heading"],
i-tew[family="display"] {
  font-family: var(--font-title);
}

i-tew[family="mono"],
i-tew[family="monospace"],
i-tew[family="code"] {
  font-family: var(--font-code);
}

i-tew[family="alt"],
i-tew[family="accent"] {
  font-family: var(--font-alt);
}

i-tew[family="display"],
i-tew[family="heading"] {
  font-family: var(--tew-font-display);
}

/* System font stacks */
i-tew[family="system"] {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

i-tew[family="ui"] {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
}

/* ==========================================================================
   FONT SIZE (Modular Scale)
   ========================================================================== */

/* Using the Elvish modular scale */
i-tew[size="-3"], i-tew[size="3xs"] { font-size: var(--s-3, 0.579rem); }
i-tew[size="-2"], i-tew[size="2xs"] { font-size: var(--s-2, 0.694rem); }
i-tew[size="-1"], i-tew[size="xs"]  { font-size: var(--s-1, 0.833rem); }
i-tew[size="0"],  i-tew[size="sm"]  { font-size: var(--s0, 1rem); }
i-tew[size="1"],  i-tew[size="base"],
i-tew[size="md"] { font-size: var(--s1, 1.2rem); }
i-tew[size="2"],  i-tew[size="lg"]  { font-size: var(--s2, 1.44rem); }
i-tew[size="3"],  i-tew[size="xl"]  { font-size: var(--s3, 1.728rem); }
i-tew[size="4"],  i-tew[size="2xl"] { font-size: var(--s4, 2.074rem); }
i-tew[size="5"],  i-tew[size="3xl"] { font-size: var(--s5, 2.488rem); }
i-tew[size="6"],  i-tew[size="4xl"] { font-size: var(--s6, 2.986rem); }
i-tew[size="7"],  i-tew[size="5xl"] { font-size: var(--s7, 3.583rem); }
i-tew[size="8"],  i-tew[size="6xl"] { font-size: var(--s8, 4.3rem); }

/* Fluid/responsive sizing */
i-tew[size="fluid-sm"] { font-size: clamp(0.875rem, 2vw, 1rem); }
i-tew[size="fluid"]    { font-size: clamp(1rem, 2.5vw, 1.5rem); }
i-tew[size="fluid-lg"] { font-size: clamp(1.5rem, 4vw, 3rem); }
i-tew[size="fluid-xl"] { font-size: clamp(2rem, 6vw, 5rem); }

/* ==========================================================================
   FONT WEIGHT
   ========================================================================== */

i-tew[weight="thin"],       i-tew[weight="100"] { font-weight: 100; }
i-tew[weight="extralight"], i-tew[weight="200"] { font-weight: 200; }
i-tew[weight="light"],      i-tew[weight="300"] { font-weight: 300; }
i-tew[weight="normal"],     i-tew[weight="400"] { font-weight: 400; }
i-tew[weight="medium"],     i-tew[weight="500"] { font-weight: 500; }
i-tew[weight="semibold"],   i-tew[weight="600"] { font-weight: 600; }
i-tew[weight="bold"],       i-tew[weight="700"] { font-weight: 700; }
i-tew[weight="extrabold"],  i-tew[weight="800"] { font-weight: 800; }
i-tew[weight="black"],      i-tew[weight="900"] { font-weight: 900; }

/* ==========================================================================
   LINE HEIGHT (Leading)
   ========================================================================== */

i-tew[leading="none"]    { line-height: 1; }
i-tew[leading="tight"]   { line-height: 1.25; }
i-tew[leading="snug"]    { line-height: 1.375; }
i-tew[leading="normal"]  { line-height: 1.5; }
i-tew[leading="relaxed"] { line-height: 1.625; }
i-tew[leading="loose"]   { line-height: 2; }

/* Numeric values */
i-tew[leading="1"]   { line-height: 1; }
i-tew[leading="1.2"] { line-height: 1.2; }
i-tew[leading="1.4"] { line-height: 1.4; }
i-tew[leading="1.5"] { line-height: 1.5; }
i-tew[leading="1.6"] { line-height: 1.6; }
i-tew[leading="1.8"] { line-height: 1.8; }
i-tew[leading="2"]   { line-height: 2; }

/* ==========================================================================
   LETTER SPACING (Tracking)
   ========================================================================== */

i-tew[tracking="tighter"] { letter-spacing: -0.05em; }
i-tew[tracking="tight"]   { letter-spacing: -0.025em; }
i-tew[tracking="normal"]  { letter-spacing: 0; }
i-tew[tracking="wide"]    { letter-spacing: 0.025em; }
i-tew[tracking="wider"]   { letter-spacing: 0.05em; }
i-tew[tracking="widest"]  { letter-spacing: 0.1em; }

/* Uppercase often needs more tracking */
i-tew[tracking="caps"] { letter-spacing: 0.15em; }

/* ==========================================================================
   WORD SPACING
   ========================================================================== */

i-tew[word-spacing="tight"]   { word-spacing: -0.05em; }
i-tew[word-spacing="normal"]  { word-spacing: normal; }
i-tew[word-spacing="wide"]    { word-spacing: 0.1em; }
i-tew[word-spacing="wider"]   { word-spacing: 0.25em; }

/* ==========================================================================
   TEXT ALIGNMENT
   ========================================================================== */

i-tew[align="left"]    { text-align: left; }
i-tew[align="center"]  { text-align: center; }
i-tew[align="right"]   { text-align: right; }
i-tew[align="justify"] { text-align: justify; }
i-tew[align="start"]   { text-align: start; }
i-tew[align="end"]     { text-align: end; }

/* Vertical alignment (for inline elements) */
i-tew[valign="top"]      { vertical-align: top; }
i-tew[valign="middle"]   { vertical-align: middle; }
i-tew[valign="bottom"]   { vertical-align: bottom; }
i-tew[valign="baseline"] { vertical-align: baseline; }
i-tew[valign="sub"]      { vertical-align: sub; }
i-tew[valign="super"]    { vertical-align: super; }

/* ==========================================================================
   TEXT TRANSFORM (Case)
   ========================================================================== */

i-tew[transform="uppercase"],
i-tew[case="upper"] { 
  text-transform: uppercase; 
}

i-tew[transform="lowercase"],
i-tew[case="lower"] { 
  text-transform: lowercase; 
}

i-tew[transform="capitalize"],
i-tew[case="title"] { 
  text-transform: capitalize; 
}

i-tew[transform="none"],
i-tew[case="none"] { 
  text-transform: none; 
}

/* Small caps */
i-tew[transform="small-caps"],
i-tew[variant="small-caps"] { 
  font-variant-caps: small-caps; 
}

i-tew[transform="all-small-caps"],
i-tew[variant="all-small-caps"] { 
  font-variant-caps: all-small-caps; 
}

/* ==========================================================================
   FONT STYLE
   ========================================================================== */

i-tew[style="italic"],
i-tew[italic] { 
  font-style: italic; 
}

i-tew[style="oblique"] { 
  font-style: oblique; 
}

i-tew[style="normal"] { 
  font-style: normal; 
}

/* ==========================================================================
   TEXT DECORATION
   ========================================================================== */

/* Underline */
i-tew[decoration="underline"],
i-tew[underline] { 
  text-decoration: underline;
  text-underline-offset: 0.2em;
}

i-tew[decoration="underline-wavy"] { 
  text-decoration: wavy underline;
  text-underline-offset: 0.2em;
}

i-tew[decoration="underline-dotted"] { 
  text-decoration: dotted underline;
  text-underline-offset: 0.2em;
}

i-tew[decoration="underline-dashed"] { 
  text-decoration: dashed underline;
  text-underline-offset: 0.2em;
}

i-tew[decoration="underline-double"] { 
  text-decoration: double underline;
  text-underline-offset: 0.2em;
}

/* Line-through (strikethrough) */
i-tew[decoration="line-through"],
i-tew[decoration="strike"],
i-tew[strikethrough] { 
  text-decoration: line-through; 
}

/* Overline */
i-tew[decoration="overline"] { 
  text-decoration: overline; 
}

/* None */
i-tew[decoration="none"],
i-tew[no-decoration] { 
  text-decoration: none; 
}

/* Decoration thickness */
i-tew[decoration-thickness="thin"]   { text-decoration-thickness: 1px; }
i-tew[decoration-thickness="medium"] { text-decoration-thickness: 2px; }
i-tew[decoration-thickness="thick"]  { text-decoration-thickness: 3px; }
i-tew[decoration-thickness="auto"]   { text-decoration-thickness: from-font; }

/* Skip ink (for underlines) */
i-tew[decoration-skip="auto"] { text-decoration-skip-ink: auto; }
i-tew[decoration-skip="none"] { text-decoration-skip-ink: none; }
i-tew[decoration-skip="all"]  { text-decoration-skip-ink: all; }

/* ==========================================================================
   TEXT WRAPPING
   ========================================================================== */

/* Modern text-wrap property */
i-tew[wrap="balance"] { 
  text-wrap: balance; 
}

i-tew[wrap="pretty"] { 
  text-wrap: pretty; 
}

i-tew[wrap="stable"] { 
  text-wrap: stable; 
}

i-tew[wrap="nowrap"],
i-tew[nowrap] { 
  text-wrap: nowrap;
  white-space: nowrap; 
}

/* White-space control */
i-tew[whitespace="normal"]   { white-space: normal; }
i-tew[whitespace="nowrap"]   { white-space: nowrap; }
i-tew[whitespace="pre"]      { white-space: pre; }
i-tew[whitespace="pre-wrap"] { white-space: pre-wrap; }
i-tew[whitespace="pre-line"] { white-space: pre-line; }
i-tew[whitespace="break"]    { white-space: break-spaces; }

/* Word break */
i-tew[break="normal"] { word-break: normal; }
i-tew[break="all"]    { word-break: break-all; }
i-tew[break="keep"]   { word-break: keep-all; }
i-tew[break="word"]   { overflow-wrap: break-word; }

/* Hyphenation */
i-tew[hyphens="auto"]   { hyphens: auto; }
i-tew[hyphens="manual"] { hyphens: manual; }
i-tew[hyphens="none"]   { hyphens: none; }

/* ==========================================================================
   TEXT OVERFLOW & TRUNCATION
   ========================================================================== */

i-tew[overflow="ellipsis"],
i-tew[truncate] {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

i-tew[overflow="clip"] {
  overflow: hidden;
  text-overflow: clip;
}

/* Multi-line truncation (line-clamp) */
i-tew[lines="1"] {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
  overflow: hidden;
}

i-tew[lines="2"] {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

i-tew[lines="3"] {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
  overflow: hidden;
}

i-tew[lines="4"] {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 4;
  overflow: hidden;
}

i-tew[lines="5"] {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 5;
  overflow: hidden;
}

/* ==========================================================================
   TEXT INDENT
   ========================================================================== */

i-tew[indent="none"]   { text-indent: 0; }
i-tew[indent="sm"]     { text-indent: 1em; }
i-tew[indent="md"]     { text-indent: 2em; }
i-tew[indent="lg"]     { text-indent: 3em; }
i-tew[indent="hanging"] { 
  text-indent: -1em; 
  padding-left: 1em; 
}

/* ==========================================================================
   TEXT COLOR
   ========================================================================== */

/* Semantic colors */
i-tew[color="primary"]   { color: var(--color-text, currentColor); }
i-tew[color="secondary"],
i-tew[color="muted"]     { color: var(--color-text-muted, oklch(50% 0 0)); }
i-tew[color="accent"]    { color: var(--color-accent, oklch(60% 0.2 250)); }
i-tew[color="success"]   { color: var(--color-success, oklch(65% 0.2 145)); }
i-tew[color="warning"]   { color: var(--color-warning, oklch(75% 0.15 85)); }
i-tew[color="error"],
i-tew[color="danger"]    { color: var(--color-error, oklch(60% 0.25 25)); }
i-tew[color="info"]      { color: var(--color-info, oklch(65% 0.15 230)); }

/* Neutral colors */
i-tew[color="inherit"]     { color: inherit; }
i-tew[color="current"]     { color: currentColor; }
i-tew[color="transparent"] { color: transparent; }
i-tew[color="white"]       { color: oklch(100% 0 0); }
i-tew[color="black"]       { color: oklch(0% 0 0); }
i-tew[color="gray"],
i-tew[color="grey"]        { color: oklch(50% 0 0); }

/* ==========================================================================
   FONT FEATURES & VARIANTS
   ========================================================================== */

/* Numeric variants */
i-tew[numeric="tabular"] { 
  font-variant-numeric: tabular-nums; 
}
i-tew[numeric="proportional"] { 
  font-variant-numeric: proportional-nums; 
}
i-tew[numeric="lining"] { 
  font-variant-numeric: lining-nums; 
}
i-tew[numeric="oldstyle"] { 
  font-variant-numeric: oldstyle-nums; 
}
i-tew[numeric="diagonal-fractions"] { 
  font-variant-numeric: diagonal-fractions; 
}
i-tew[numeric="stacked-fractions"] { 
  font-variant-numeric: stacked-fractions; 
}
i-tew[numeric="ordinal"] { 
  font-variant-numeric: ordinal; 
}
i-tew[numeric="slashed-zero"] { 
  font-variant-numeric: slashed-zero; 
}

/* Ligatures */
i-tew[ligatures="normal"]      { font-variant-ligatures: normal; }
i-tew[ligatures="none"]        { font-variant-ligatures: none; }
i-tew[ligatures="common"]      { font-variant-ligatures: common-ligatures; }
i-tew[ligatures="contextual"]  { font-variant-ligatures: contextual; }
i-tew[ligatures="discretionary"] { font-variant-ligatures: discretionary-ligatures; }

/* Kerning */
i-tew[kerning="auto"]   { font-kerning: auto; }
i-tew[kerning="normal"] { font-kerning: normal; }
i-tew[kerning="none"]   { font-kerning: none; }

/* ==========================================================================
   TEXT RENDERING
   ========================================================================== */

i-tew[rendering="auto"]        { text-rendering: auto; }
i-tew[rendering="speed"]       { text-rendering: optimizeSpeed; }
i-tew[rendering="legibility"]  { text-rendering: optimizeLegibility; }
i-tew[rendering="precision"]   { text-rendering: geometricPrecision; }

/* Font smoothing (WebKit/Blink) */
i-tew[smoothing="auto"] {
  -webkit-font-smoothing: auto;
  -moz-osx-font-smoothing: auto;
}
i-tew[smoothing="antialiased"] {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
i-tew[smoothing="subpixel"] {
  -webkit-font-smoothing: subpixel-antialiased;
}

/* ==========================================================================
   WRITING MODE & DIRECTION
   ========================================================================== */

/* Writing mode */
i-tew[writing="horizontal"] { writing-mode: horizontal-tb; }
i-tew[writing="vertical-rl"] { writing-mode: vertical-rl; }
i-tew[writing="vertical-lr"] { writing-mode: vertical-lr; }
i-tew[writing="sideways-rl"] { writing-mode: sideways-rl; }
i-tew[writing="sideways-lr"] { writing-mode: sideways-lr; }

/* Text direction */
i-tew[dir="ltr"] { direction: ltr; }
i-tew[dir="rtl"] { direction: rtl; }

/* Text orientation (for vertical text) */
i-tew[orientation="mixed"]    { text-orientation: mixed; }
i-tew[orientation="upright"]  { text-orientation: upright; }
i-tew[orientation="sideways"] { text-orientation: sideways; }

/* ==========================================================================
   TEXT SHADOWS
   ========================================================================== */

i-tew[shadow="none"] { text-shadow: none; }

i-tew[shadow="sm"] { 
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.2); 
}
i-tew[shadow],
i-tew[shadow="md"] { 
  text-shadow: 0 2px 4px oklch(0% 0 0 / 0.25); 
}
i-tew[shadow="lg"] { 
  text-shadow: 0 4px 8px oklch(0% 0 0 / 0.3); 
}

/* Crisp shadow (no blur) */
i-tew[shadow="crisp"] { 
  text-shadow: 1px 1px 0 oklch(0% 0 0 / 0.3); 
}

/* Outline/stroke effect via shadow */
i-tew[shadow="outline"] {
  text-shadow:
    -1px -1px 0 currentColor,
     1px -1px 0 currentColor,
    -1px  1px 0 currentColor,
     1px  1px 0 currentColor;
}

/* 3D/emboss effect */
i-tew[shadow="3d"],
i-tew[shadow="emboss"] {
  text-shadow:
    1px 1px 0 oklch(0% 0 0 / 0.3),
    2px 2px 0 oklch(0% 0 0 / 0.2),
    3px 3px 0 oklch(0% 0 0 / 0.1);
}

/* Long shadow */
i-tew[shadow="long"] {
  text-shadow:
    1px 1px 0 oklch(0% 0 0 / 0.15),
    2px 2px 0 oklch(0% 0 0 / 0.12),
    3px 3px 0 oklch(0% 0 0 / 0.09),
    4px 4px 0 oklch(0% 0 0 / 0.06),
    5px 5px 0 oklch(0% 0 0 / 0.03);
}


/* ==========================================================================
   NEON GLOW SYSTEM
   
   True neon text effect with stacked shadows for authentic glow.
   Compatible with all modern browsers (no relative color syntax).
   
   Attributes:
     shadow="glow"           - Activates neon glow
     glow-color="brand|..."  - Sets glow color (default: cyan)
     animation="pulse|..."   - Animation mode (default: steady)
     speed="slow|normal|fast"- Animation speed
     min-brightness="0-100"  - Minimum glow brightness (for animations)
     max-brightness="0-100"  - Maximum glow brightness (for animations)
     motion="ease-in-out|..." - Easing function for animations
   
   Examples:
     <i-tew shadow="glow">Default cyan glow</i-tew>
     <i-tew shadow="glow" glow-color="magenta" animation="pulse">Pulsing magenta</i-tew>
     <i-tew shadow="glow" glow-color="red" animation="flicker-off">Flickering neon sign</i-tew>
   ========================================================================== */

/* --- Neon Glow Base --- */
i-tew[shadow="glow"],
i-tew[shadow="glow-lg"],
i-tew[shadow="neon"],
i-tew[shadow="neon-lg"] {
  /* Brightness control (0-1 scale) */
  --glow-brightness: 1;
  --glow-min-brightness: 0.3;
  --glow-max-brightness: 1;
  
  /* Animation timing */
  --glow-speed: 1.5s;
  --glow-motion: ease-in-out;
}

/* --- CYAN (Default) --- */
i-tew[shadow="glow"],
i-tew[shadow="neon"],
i-tew[glow-color="cyan"] {
  color: oklch(98% 0.05 195);
  text-shadow:
    0 0 2px oklch(98% 0.05 195),
    0 0 4px oklch(95% 0.1 195),
    0 0 8px oklch(90% 0.15 195),
    0 0 12px oklch(85% 0.2 195),
    0 0 20px oklch(85% 0.2 195),
    0 0 30px oklch(80% 0.2 195),
    0 0 40px oklch(75% 0.18 195 / 0.8),
    0 0 55px oklch(70% 0.15 195 / 0.6);
  filter: brightness(var(--glow-brightness));
}

i-tew[shadow="glow-lg"][glow-color="cyan"],
i-tew[shadow="neon-lg"][glow-color="cyan"],
i-tew[shadow="glow-lg"]:not([glow-color]),
i-tew[shadow="neon-lg"]:not([glow-color]) {
  color: oklch(98% 0.05 195);
  text-shadow:
    0 0 2px oklch(98% 0.05 195),
    0 0 5px oklch(95% 0.1 195),
    0 0 10px oklch(90% 0.15 195),
    0 0 20px oklch(85% 0.2 195),
    0 0 35px oklch(85% 0.2 195),
    0 0 50px oklch(80% 0.2 195),
    0 0 70px oklch(75% 0.18 195 / 0.7),
    0 0 100px oklch(70% 0.15 195 / 0.5),
    0 0 130px oklch(65% 0.12 195 / 0.3);
  filter: brightness(var(--glow-brightness));
}

/* --- MAGENTA / PINK --- */
i-tew[glow-color="magenta"],
i-tew[glow-color="pink"] {
  color: oklch(95% 0.1 330);
  text-shadow:
    0 0 2px oklch(95% 0.1 330),
    0 0 4px oklch(90% 0.15 330),
    0 0 8px oklch(80% 0.2 330),
    0 0 12px oklch(70% 0.25 330),
    0 0 20px oklch(70% 0.25 330),
    0 0 30px oklch(65% 0.22 330),
    0 0 40px oklch(60% 0.2 330 / 0.8),
    0 0 55px oklch(55% 0.18 330 / 0.6);
  filter: brightness(var(--glow-brightness));
}

i-tew[shadow="glow-lg"][glow-color="magenta"],
i-tew[shadow="glow-lg"][glow-color="pink"],
i-tew[shadow="neon-lg"][glow-color="magenta"],
i-tew[shadow="neon-lg"][glow-color="pink"] {
  color: oklch(95% 0.1 330);
  text-shadow:
    0 0 2px oklch(95% 0.1 330),
    0 0 5px oklch(90% 0.15 330),
    0 0 10px oklch(80% 0.2 330),
    0 0 20px oklch(70% 0.25 330),
    0 0 35px oklch(70% 0.25 330),
    0 0 50px oklch(65% 0.22 330),
    0 0 70px oklch(60% 0.2 330 / 0.7),
    0 0 100px oklch(55% 0.18 330 / 0.5),
    0 0 130px oklch(50% 0.15 330 / 0.3);
  filter: brightness(var(--glow-brightness));
}

/* --- RED --- */
i-tew[glow-color="red"] {
  color: oklch(90% 0.1 25);
  text-shadow:
    0 0 2px oklch(90% 0.1 25),
    0 0 4px oklch(85% 0.15 25),
    0 0 8px oklch(75% 0.22 25),
    0 0 12px oklch(65% 0.28 25),
    0 0 20px oklch(65% 0.28 25),
    0 0 30px oklch(60% 0.25 25),
    0 0 40px oklch(55% 0.22 25 / 0.8),
    0 0 55px oklch(50% 0.2 25 / 0.6);
  filter: brightness(var(--glow-brightness));
}

i-tew[shadow="glow-lg"][glow-color="red"],
i-tew[shadow="neon-lg"][glow-color="red"] {
  color: oklch(90% 0.1 25);
  text-shadow:
    0 0 2px oklch(90% 0.1 25),
    0 0 5px oklch(85% 0.15 25),
    0 0 10px oklch(75% 0.22 25),
    0 0 20px oklch(65% 0.28 25),
    0 0 35px oklch(65% 0.28 25),
    0 0 50px oklch(60% 0.25 25),
    0 0 70px oklch(55% 0.22 25 / 0.7),
    0 0 100px oklch(50% 0.2 25 / 0.5),
    0 0 130px oklch(45% 0.18 25 / 0.3);
  filter: brightness(var(--glow-brightness));
}

/* --- ORANGE --- */
i-tew[glow-color="orange"] {
  color: oklch(95% 0.08 55);
  text-shadow:
    0 0 2px oklch(95% 0.08 55),
    0 0 4px oklch(90% 0.12 55),
    0 0 8px oklch(82% 0.18 55),
    0 0 12px oklch(75% 0.2 55),
    0 0 20px oklch(75% 0.2 55),
    0 0 30px oklch(70% 0.18 55),
    0 0 40px oklch(65% 0.16 55 / 0.8),
    0 0 55px oklch(60% 0.14 55 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- YELLOW --- */
i-tew[glow-color="yellow"] {
  color: oklch(98% 0.05 95);
  text-shadow:
    0 0 2px oklch(98% 0.05 95),
    0 0 4px oklch(95% 0.1 95),
    0 0 8px oklch(92% 0.15 95),
    0 0 12px oklch(90% 0.18 95),
    0 0 20px oklch(90% 0.18 95),
    0 0 30px oklch(85% 0.16 95),
    0 0 40px oklch(80% 0.14 95 / 0.8),
    0 0 55px oklch(75% 0.12 95 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- GREEN / LIME --- */
i-tew[glow-color="green"],
i-tew[glow-color="lime"] {
  color: oklch(97% 0.08 145);
  text-shadow:
    0 0 2px oklch(97% 0.08 145),
    0 0 4px oklch(93% 0.12 145),
    0 0 8px oklch(88% 0.2 145),
    0 0 12px oklch(85% 0.25 145),
    0 0 20px oklch(85% 0.25 145),
    0 0 30px oklch(80% 0.22 145),
    0 0 40px oklch(75% 0.2 145 / 0.8),
    0 0 55px oklch(70% 0.18 145 / 0.6);
  filter: brightness(var(--glow-brightness));
}

i-tew[shadow="glow-lg"][glow-color="green"],
i-tew[shadow="glow-lg"][glow-color="lime"],
i-tew[shadow="neon-lg"][glow-color="green"],
i-tew[shadow="neon-lg"][glow-color="lime"] {
  color: oklch(97% 0.08 145);
  text-shadow:
    0 0 2px oklch(97% 0.08 145),
    0 0 5px oklch(93% 0.12 145),
    0 0 10px oklch(88% 0.2 145),
    0 0 20px oklch(85% 0.25 145),
    0 0 35px oklch(85% 0.25 145),
    0 0 50px oklch(80% 0.22 145),
    0 0 70px oklch(75% 0.2 145 / 0.7),
    0 0 100px oklch(70% 0.18 145 / 0.5),
    0 0 130px oklch(65% 0.15 145 / 0.3);
  filter: brightness(var(--glow-brightness));
}

/* --- BLUE --- */
i-tew[glow-color="blue"] {
  color: oklch(92% 0.08 260);
  text-shadow:
    0 0 2px oklch(92% 0.08 260),
    0 0 4px oklch(85% 0.12 260),
    0 0 8px oklch(75% 0.2 260),
    0 0 12px oklch(65% 0.25 260),
    0 0 20px oklch(65% 0.25 260),
    0 0 30px oklch(60% 0.22 260),
    0 0 40px oklch(55% 0.2 260 / 0.8),
    0 0 55px oklch(50% 0.18 260 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- PURPLE / VIOLET --- */
i-tew[glow-color="purple"],
i-tew[glow-color="violet"] {
  color: oklch(90% 0.1 295);
  text-shadow:
    0 0 2px oklch(90% 0.1 295),
    0 0 4px oklch(82% 0.15 295),
    0 0 8px oklch(72% 0.22 295),
    0 0 12px oklch(60% 0.28 295),
    0 0 20px oklch(60% 0.28 295),
    0 0 30px oklch(55% 0.25 295),
    0 0 40px oklch(50% 0.22 295 / 0.8),
    0 0 55px oklch(45% 0.2 295 / 0.6);
  filter: brightness(var(--glow-brightness));
}

i-tew[shadow="glow-lg"][glow-color="purple"],
i-tew[shadow="glow-lg"][glow-color="violet"],
i-tew[shadow="neon-lg"][glow-color="purple"],
i-tew[shadow="neon-lg"][glow-color="violet"] {
  color: oklch(90% 0.1 295);
  text-shadow:
    0 0 2px oklch(90% 0.1 295),
    0 0 5px oklch(82% 0.15 295),
    0 0 10px oklch(72% 0.22 295),
    0 0 20px oklch(60% 0.28 295),
    0 0 35px oklch(60% 0.28 295),
    0 0 50px oklch(55% 0.25 295),
    0 0 70px oklch(50% 0.22 295 / 0.7),
    0 0 100px oklch(45% 0.2 295 / 0.5),
    0 0 130px oklch(40% 0.18 295 / 0.3);
  filter: brightness(var(--glow-brightness));
}

/* --- WHITE --- */
i-tew[glow-color="white"] {
  color: oklch(100% 0 0);
  text-shadow:
    0 0 2px oklch(100% 0 0),
    0 0 4px oklch(98% 0 0),
    0 0 8px oklch(95% 0 0),
    0 0 12px oklch(92% 0 0),
    0 0 20px oklch(90% 0 0),
    0 0 30px oklch(85% 0 0),
    0 0 40px oklch(80% 0 0 / 0.8),
    0 0 55px oklch(75% 0 0 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- GOLD --- */
i-tew[glow-color="gold"] {
  color: oklch(95% 0.06 85);
  text-shadow:
    0 0 2px oklch(95% 0.06 85),
    0 0 4px oklch(90% 0.1 85),
    0 0 8px oklch(85% 0.14 85),
    0 0 12px oklch(82% 0.16 85),
    0 0 20px oklch(82% 0.16 85),
    0 0 30px oklch(78% 0.14 85),
    0 0 40px oklch(74% 0.12 85 / 0.8),
    0 0 55px oklch(70% 0.1 85 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- BRAND (uses CSS variable with fallback) --- */
i-tew[glow-color="brand"] {
  color: oklch(95% 0.05 168);
  text-shadow:
    0 0 2px oklch(95% 0.05 168),
    0 0 4px oklch(90% 0.1 168),
    0 0 8px oklch(86% 0.14 168),
    0 0 12px oklch(83% 0.17 168),
    0 0 20px oklch(83% 0.17 168),
    0 0 30px oklch(78% 0.15 168),
    0 0 40px oklch(73% 0.13 168 / 0.8),
    0 0 55px oklch(68% 0.11 168 / 0.6);
  filter: brightness(var(--glow-brightness));
}

/* --- Animation Speed Presets --- */
i-tew[speed="slower"] { --glow-speed: 4s; }
i-tew[speed="slow"] { --glow-speed: 2.5s; }
i-tew[speed="normal"] { --glow-speed: 1.5s; }
i-tew[speed="fast"] { --glow-speed: 0.8s; }
i-tew[speed="faster"] { --glow-speed: 0.4s; }

/* --- Motion/Easing Presets --- */
i-tew[motion="linear"] { --glow-motion: linear; }
i-tew[motion="ease"] { --glow-motion: ease; }
i-tew[motion="ease-in"] { --glow-motion: ease-in; }
i-tew[motion="ease-out"] { --glow-motion: ease-out; }
i-tew[motion="ease-in-out"] { --glow-motion: ease-in-out; }
i-tew[motion="bounce"] { --glow-motion: cubic-bezier(0.68, -0.55, 0.265, 1.55); }
i-tew[motion="snap"] { --glow-motion: cubic-bezier(0.7, 0, 0.3, 1); }

/* --- Brightness Presets --- */
i-tew[min-brightness="0"] { --glow-min-brightness: 0; }
i-tew[min-brightness="10"] { --glow-min-brightness: 0.1; }
i-tew[min-brightness="20"] { --glow-min-brightness: 0.2; }
i-tew[min-brightness="30"] { --glow-min-brightness: 0.3; }
i-tew[min-brightness="40"] { --glow-min-brightness: 0.4; }
i-tew[min-brightness="50"] { --glow-min-brightness: 0.5; }
i-tew[min-brightness="60"] { --glow-min-brightness: 0.6; }
i-tew[min-brightness="70"] { --glow-min-brightness: 0.7; }
i-tew[min-brightness="80"] { --glow-min-brightness: 0.8; }
i-tew[min-brightness="90"] { --glow-min-brightness: 0.9; }

i-tew[max-brightness="50"] { --glow-max-brightness: 0.5; }
i-tew[max-brightness="60"] { --glow-max-brightness: 0.6; }
i-tew[max-brightness="70"] { --glow-max-brightness: 0.7; }
i-tew[max-brightness="80"] { --glow-max-brightness: 0.8; }
i-tew[max-brightness="90"] { --glow-max-brightness: 0.9; }
i-tew[max-brightness="100"] { --glow-max-brightness: 1; }
i-tew[max-brightness="110"] { --glow-max-brightness: 1.1; }
i-tew[max-brightness="120"] { --glow-max-brightness: 1.2; }
i-tew[max-brightness="130"] { --glow-max-brightness: 1.3; }
i-tew[max-brightness="150"] { --glow-max-brightness: 1.5; }

/* --- Animation: Steady (default, no animation) --- */
i-tew[animation="steady"] {
  animation: none;
}

/* --- Animation: Pulse (smooth breathing) --- */
@keyframes tew-glow-pulse {
  0%, 100% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
  50% {
    filter: brightness(var(--glow-min-brightness, 0.3));
    opacity: 0.85;
  }
}

i-tew[shadow="glow"][animation="pulse"],
i-tew[shadow="glow-lg"][animation="pulse"],
i-tew[shadow="neon"][animation="pulse"],
i-tew[shadow="neon-lg"][animation="pulse"] {
  animation: tew-glow-pulse var(--glow-speed, 1.5s) var(--glow-motion, ease-in-out) infinite;
}

/* --- Animation: Dim-Bright (more dramatic) --- */
@keyframes tew-glow-dim-bright {
  0%, 100% {
    filter: brightness(var(--glow-min-brightness, 0.3));
    opacity: 0.7;
  }
  50% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
}

i-tew[shadow="glow"][animation="dim-bright"],
i-tew[shadow="glow-lg"][animation="dim-bright"],
i-tew[shadow="neon"][animation="dim-bright"],
i-tew[shadow="neon-lg"][animation="dim-bright"] {
  animation: tew-glow-dim-bright var(--glow-speed, 1.5s) var(--glow-motion, ease-in-out) infinite;
}

/* --- Animation: Flicker-On (mostly off, occasional flickers on) --- */
@keyframes tew-glow-flicker-on {
  0%, 10%, 12%, 20%, 22%, 50%, 52%, 80%, 100% {
    filter: brightness(var(--glow-min-brightness, 0.3));
    opacity: 0.4;
  }
  11%, 21%, 51% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
  81%, 85%, 87%, 90%, 95%, 98% {
    filter: brightness(0.7);
    opacity: 0.8;
  }
}

i-tew[shadow="glow"][animation="flicker-on"],
i-tew[shadow="glow-lg"][animation="flicker-on"],
i-tew[shadow="neon"][animation="flicker-on"],
i-tew[shadow="neon-lg"][animation="flicker-on"] {
  animation: tew-glow-flicker-on calc(var(--glow-speed, 1.5s) * 2) steps(1) infinite;
}

/* --- Animation: Flicker-Off (mostly on, occasional flickers off) --- */
@keyframes tew-glow-flicker-off {
  0%, 8%, 10%, 18%, 20%, 100% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
  9%, 19% {
    filter: brightness(var(--glow-min-brightness, 0.3));
    opacity: 0.5;
  }
  50%, 52% {
    filter: brightness(0.8);
    opacity: 0.9;
  }
}

i-tew[shadow="glow"][animation="flicker-off"],
i-tew[shadow="glow-lg"][animation="flicker-off"],
i-tew[shadow="neon"][animation="flicker-off"],
i-tew[shadow="neon-lg"][animation="flicker-off"] {
  animation: tew-glow-flicker-off calc(var(--glow-speed, 1.5s) * 2) steps(1) infinite;
}

/* --- Animation: Mostly-On (stable with occasional subtle dips) --- */
@keyframes tew-glow-mostly-on {
  0%, 15%, 17%, 45%, 47%, 75%, 100% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
  16%, 46% {
    filter: brightness(0.85);
    opacity: 0.95;
  }
}

i-tew[shadow="glow"][animation="mostly-on"],
i-tew[shadow="glow-lg"][animation="mostly-on"],
i-tew[shadow="neon"][animation="mostly-on"],
i-tew[shadow="neon-lg"][animation="mostly-on"] {
  animation: tew-glow-mostly-on var(--glow-speed, 1.5s) linear infinite;
}

/* --- Animation: Mostly-Off (dim with occasional bright flashes) --- */
@keyframes tew-glow-mostly-off {
  0%, 25%, 27%, 60%, 62%, 100% {
    filter: brightness(var(--glow-min-brightness, 0.3));
    opacity: 0.5;
  }
  26%, 61% {
    filter: brightness(var(--glow-max-brightness, 1));
    opacity: 1;
  }
}

i-tew[shadow="glow"][animation="mostly-off"],
i-tew[shadow="glow-lg"][animation="mostly-off"],
i-tew[shadow="neon"][animation="mostly-off"],
i-tew[shadow="neon-lg"][animation="mostly-off"] {
  animation: tew-glow-mostly-off calc(var(--glow-speed, 1.5s) * 1.5) linear infinite;
}

/* --- Animation: LTR/RTL (brightness sweep) --- */
@keyframes tew-glow-sweep {
  0%, 15% {
    filter: brightness(var(--glow-min-brightness, 0.3));
  }
  30% {
    filter: brightness(0.6);
  }
  50%, 70% {
    filter: brightness(var(--glow-max-brightness, 1));
  }
  85%, 100% {
    filter: brightness(var(--glow-min-brightness, 0.3));
  }
}

i-tew[shadow="glow"][animation="ltr"],
i-tew[shadow="glow-lg"][animation="ltr"],
i-tew[shadow="neon"][animation="ltr"],
i-tew[shadow="neon-lg"][animation="ltr"] {
  animation: tew-glow-sweep var(--glow-speed, 1.5s) var(--glow-motion, ease-in-out) infinite;
}

i-tew[shadow="glow"][animation="rtl"],
i-tew[shadow="glow-lg"][animation="rtl"],
i-tew[shadow="neon"][animation="rtl"],
i-tew[shadow="neon-lg"][animation="rtl"] {
  animation: tew-glow-sweep var(--glow-speed, 1.5s) var(--glow-motion, ease-in-out) infinite reverse;
}

/* --- Animation: Buzz (rapid subtle flicker like real neon) --- */
@keyframes tew-glow-buzz {
  0%, 100% { filter: brightness(1); }
  10% { filter: brightness(0.97); }
  20% { filter: brightness(1); }
  30% { filter: brightness(0.95); }
  35% { filter: brightness(1); }
  50% { filter: brightness(0.98); }
  65% { filter: brightness(1); }
  70% { filter: brightness(0.96); }
  80% { filter: brightness(1); }
  90% { filter: brightness(0.97); }
}

i-tew[shadow="glow"][animation="buzz"],
i-tew[shadow="glow-lg"][animation="buzz"],
i-tew[shadow="neon"][animation="buzz"],
i-tew[shadow="neon-lg"][animation="buzz"] {
  animation: tew-glow-buzz calc(var(--glow-speed, 1.5s) * 0.3) linear infinite;
}

/* --- Animation: Warm-Up (like a neon tube warming up) --- */
@keyframes tew-glow-warmup {
  0%, 5% { filter: brightness(0); opacity: 0; }
  6%, 8% { filter: brightness(0.3); opacity: 0.5; }
  9%, 15% { filter: brightness(0); opacity: 0; }
  16%, 20% { filter: brightness(0.5); opacity: 0.7; }
  21%, 30% { filter: brightness(0.2); opacity: 0.3; }
  31%, 40% { filter: brightness(0.7); opacity: 0.85; }
  41%, 45% { filter: brightness(0.4); opacity: 0.6; }
  46%, 60% { filter: brightness(0.9); opacity: 0.95; }
  61%, 65% { filter: brightness(0.7); opacity: 0.85; }
  66%, 100% { filter: brightness(1); opacity: 1; }
}

i-tew[shadow="glow"][animation="warm-up"],
i-tew[shadow="glow-lg"][animation="warm-up"],
i-tew[shadow="neon"][animation="warm-up"],
i-tew[shadow="neon-lg"][animation="warm-up"] {
  animation: tew-glow-warmup calc(var(--glow-speed, 1.5s) * 3) ease-out forwards;
}

/* --- Animation: Dying (like a failing neon tube) --- */
@keyframes tew-glow-dying {
  0%, 20% { filter: brightness(1); opacity: 1; }
  25%, 27% { filter: brightness(0.3); opacity: 0.4; }
  30%, 50% { filter: brightness(0.8); opacity: 0.9; }
  55%, 58% { filter: brightness(0.3); opacity: 0.3; }
  60%, 65% { filter: brightness(0.6); opacity: 0.7; }
  70%, 75% { filter: brightness(0.2); opacity: 0.2; }
  80%, 82% { filter: brightness(0.4); opacity: 0.5; }
  85%, 100% { filter: brightness(0); opacity: 0; }
}

i-tew[shadow="glow"][animation="dying"],
i-tew[shadow="glow-lg"][animation="dying"],
i-tew[shadow="neon"][animation="dying"],
i-tew[shadow="neon-lg"][animation="dying"] {
  animation: tew-glow-dying calc(var(--glow-speed, 1.5s) * 4) ease-in forwards;
}

/* --- Reduced Motion: Disable animations --- */
@media (prefers-reduced-motion: reduce) {
  i-tew[shadow="glow"][animation],
  i-tew[shadow="glow-lg"][animation],
  i-tew[shadow="neon"][animation],
  i-tew[shadow="neon-lg"][animation] {
    animation: none !important;
    filter: brightness(1) !important;
  }
}

/* ==========================================================================
   SELECTION STYLING
   ========================================================================== */

i-tew[selection="none"] {
  user-select: none;
  -webkit-user-select: none;
}

i-tew[selection="all"] {
  user-select: all;
}

i-tew[selection="text"] {
  user-select: text;
}

/* ==========================================================================
   PRESETS / COMBINATIONS
   
   Opinionated bundles of typography properties for common patterns.
   All presets use the font variables from tokens.css.
   ========================================================================== */

/* === HEADINGS (h1-h6) === */

i-tew[preset="heading"],
i-tew[preset="h1"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s5, 2.488rem);
  font-weight: 800;
  line-height: 1.1;
  letter-spacing: -0.03em;
  text-wrap: balance;
}

i-tew[preset="h2"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s4, 2.074rem);
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: -0.02em;
  text-wrap: balance;
}

i-tew[preset="h3"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s3, 1.728rem);
  font-weight: 600;
  line-height: 1.25;
  letter-spacing: -0.01em;
  text-wrap: balance;
}

i-tew[preset="h4"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s2, 1.44rem);
  font-weight: 600;
  line-height: 1.3;
  text-wrap: balance;
}

i-tew[preset="h5"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s1, 1.2rem);
  font-weight: 600;
  line-height: 1.35;
  text-wrap: balance;
}

i-tew[preset="h6"] {
  display: block;
  font-family: var(--font-title);
  font-size: var(--s0, 1rem);
  font-weight: 600;
  line-height: 1.4;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-wrap: balance;
}

/* === BODY TEXT === */

i-tew[preset="body"] {
  display: block;
  font-family: var(--font-sans);
  font-size: var(--s0, 1rem);
  line-height: 1.6;
  text-wrap: pretty;
}

/* Lead/intro paragraph */
i-tew[preset="lead"] {
  display: block;
  font-family: var(--font-sans);
  font-size: var(--s1, 1.2rem);
  line-height: 1.6;
  color: var(--color-text-muted);
}

/* Caption/small text */
i-tew[preset="caption"],
i-tew[preset="small"] {
  font-size: var(--s-1, 0.833rem);
  color: var(--color-text-muted);
  line-height: 1.4;
}

/* Label preset */
i-tew[preset="label"] {
  font-size: var(--s-1, 0.833rem);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* === CODE === */

i-tew[preset="code"] {
  font-family: var(--font-code);
  font-size: 0.9em;
  font-variant-ligatures: none;
  background: oklch(0% 0 0 / 0.08);
  padding: 0.1em 0.3em;
  border-radius: 0.25em;
}

/* === QUOTES === */

/* Simple quote (border left) */
i-tew[preset="quote"] {
  display: block;
  font-family: var(--font-serif);
  font-style: italic;
  font-size: var(--s1, 1.2rem);
  line-height: 1.6;
  border-left: 3px solid var(--color-accent, oklch(60% 0.2 250));
  padding-left: 1em;
}

/* Big quote / Pull quote (giant quotation mark) */
i-tew[preset="bquote"],
i-tew[preset="pullquote"] {
  display: block;
  font-family: var(--font-serif);
  font-style: italic;
  font-size: var(--s2, 1.44rem);
  line-height: 1.5;
  padding-left: 3.5rem;
  position: relative;
  
  /* Quote character customization */
  --tew-quote-char: '"';
  --tew-quote-color: var(--color-accent, oklch(60% 0.2 250));
  --tew-quote-size: var(--s6, 4rem);
  --tew-quote-opacity: 0.25;
}

/* The giant quote mark */
i-tew[preset="bquote"]::before,
i-tew[preset="pullquote"]::before {
  content: var(--tew-quote-char);
  position: absolute;
  left: 0;
  top: -0.1em;
  font-family: var(--font-serif);
  font-size: var(--tew-quote-size);
  font-style: normal;
  font-weight: 700;
  line-height: 1;
  color: var(--tew-quote-color);
  opacity: var(--tew-quote-opacity);
}

/* Attribution via data-cite attribute */
i-tew[preset="bquote"][data-cite]::after,
i-tew[preset="pullquote"][data-cite]::after {
  content: "— " attr(data-cite);
  display: block;
  margin-top: var(--s0, 1rem);
  font-size: var(--s-1, 0.833rem);
  font-style: normal;
  font-weight: 500;
  color: var(--color-text-muted);
}

/* Optional closing quote mark */
i-tew[preset="bquote"][closing],
i-tew[preset="pullquote"][closing] {
  padding-right: 2.5rem;
}

i-tew[preset="bquote"][closing]::after,
i-tew[preset="pullquote"][closing]::after {
  content: var(--tew-quote-char);
  position: absolute;
  right: 0;
  bottom: 0;
  font-family: var(--font-serif);
  font-size: calc(var(--tew-quote-size) * 0.7);
  font-style: normal;
  font-weight: 700;
  line-height: 1;
  color: var(--tew-quote-color);
  opacity: var(--tew-quote-opacity);
  transform: rotate(180deg);
}

/* When both closing AND data-cite, use a wrapper approach */
i-tew[preset="bquote"][closing][data-cite]::after {
  content: none; /* Let the closing quote be shown, cite needs a wrapper */
}

/* ==========================================================================
   MEASURE (Line Length)
   ========================================================================== */

i-tew[measure="narrow"]  { max-width: 45ch; }
i-tew[measure="normal"]  { max-width: 65ch; }
i-tew[measure],
i-tew[measure="wide"]    { max-width: 75ch; }
i-tew[measure="full"]    { max-width: none; }

/* ==========================================================================
   RESPONSIVE TYPOGRAPHY
   ========================================================================== */

/* Responsive size adjustments */
@media (max-width: 640px) {
  i-tew[responsive] {
    font-size: max(0.875em, 16px);
  }
  
  i-tew[preset="heading"],
  i-tew[preset="h1"][responsive] {
    font-size: var(--s3, 1.728rem);
  }
  
  i-tew[preset="h2"][responsive] {
    font-size: var(--s2, 1.44rem);
  }
}

/* ==========================================================================
   ACCESSIBILITY
   ========================================================================== */

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  i-tew[color="muted"],
  i-tew[color="secondary"] {
    color: var(--color-text);
  }
}

/* Reduced motion - disable text animations if any */
@media (prefers-reduced-motion: reduce) {
  i-tew {
    transition: none !important;
  }
}
